apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: powerdns
  #annotations:
  #  argocd.argoproj.io/sync-wave: "10"
spec:
  destination:
    name: in-cluster
    namespace: powerdns
    
  project: default
  source:
    chart: powerdns
    repoURL: https://nolte.github.io/helm-charts-repo
    targetRevision: 1.3.1
    helm:
      valueFiles: []
      parameters:
        - name: powerdns.powerdns.api_key
          value: "supersecretpw"
        - name: powerdns.powerdns.domain
          value: "k8sservices.local"
      values: |
        powerdns:
          strategyType: RollingUpdate
          deployment:
            annotations:
              reloader.stakater.com/auto: "true"
          service:
            annotations:
              metallb.universe.tf/allow-shared-ip: powerdns